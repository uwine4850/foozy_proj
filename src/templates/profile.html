{% extends "t2/base.html" %}

{% block cont %}
<form action="/create-chat" method="post" enctype="application/x-www-form-urlencoded" id="new-msg-form" class="new-msg-form new-msg-form-hidden">
    <textarea name="msg"></textarea>
    <input type="hidden" name="chatId" value="{{ isChatExist }}">
    <input type="hidden" name="userId" value="{{ user.Id }}">
    <button>
        <a>Send</a>
    </button>
</form>
<div class="profile-wrap">
    <div class="profile-left-side">
        {% if user.Avatar %}
        <div class="profile-avatar">
            <img src="/{{ user.Avatar }}" alt="">
        </div>
        {% else %}
        <div class="profile-avatar">
            <img src="/static/img/default.jpeg" alt="">
        </div>
        {% endif %}
        <div class="profile-username">
            <div class="pu-name">
                {{ user.Name }}
            </div>
            <div class="pu-username">
                @{{ user.Username }}
            </div>
        </div>
        <div class="profile-buttons">
            {% if user.Id == UID %}
            <button class="profile-button-edit">
                <a href="/profile/{{ UID }}/edit"><img src="/static/img/edit.svg">Edit</a>
            </button>
            {% else %}
            <button id="profile-button-message" data-chatId="{{ isChatExist }}" class="profile-button-message">
                <a><img src="/static/img/message.svg">Message</a>
            </button>
            {% endif %}
        </div>
        {% if user.Description %}
        <div class="profile-description">
            {{ user.Description }}
        </div>
        {% endif %}
    </div>
</div>
<script>
    document.getElementById("profile-button-message").onclick = function (){
        let id = this.getAttribute("data-chatId");
        if (id !== "-1"){
            window.location.href = "http://localhost:8000/chat/" + id
        } else {
            document.getElementById("new-msg-form").classList.toggle("new-msg-form-hidden");
        }
    }
</script>
{% endblock cont %}
